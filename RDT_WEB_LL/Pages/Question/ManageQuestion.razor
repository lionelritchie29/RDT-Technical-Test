@page "/manage/questions"

@using RDT_WEB_LL.Models
@using RDT_WEB_LL.Services
@using RDT_WEB_LL.Components

@inject QuestionService questionService

@attribute [Authorize(Roles = "Admin")]

<h3>Manage Questions</h3>

@if (questions is null)
{
    <p>Loading data...</p>
}
else
{
    <div class="d-flex">
        <div class="w-75">
            <div class="row mt-3">
                @foreach (var q in questions)
                {
                    <div class="col-4 mb-4">
                        <QuestionCard count=@count question=@q>
                            <QuestionCardManageContent question="@q"></QuestionCardManageContent>
                        </QuestionCard>
                    </div>

                    count++;
                }
            </div>
        </div>
        <div class="w-25 ml-3 pl-3 border-left border-secondary">
            <div class="mt-3">
                <div class="card" style="width: 18rem;">
                    <div class="card-header bg-primary text-white">
                        Selected Questions
                    </div>
                    <div class="card-body">
                        <p class="card-text">@selectedQuestion.QuestionText</p>
                    </div>

                    <ul class="list-group list-group-flush">
                        <li class="list-group-item">An item</li>
                        <li class="list-group-item">A second item</li>
                        <li class="list-group-item">A third item</li>
                    </ul>
                    <div class="card-body">
                        <a class="btn btn-primary text-white">Update</a>
                        <a class="btn btn-danger text-white">Delete</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
}


@code {
    int count = 1;
    List<Question> questions;

    Question selectedQuestion;

    protected override async Task OnInitializedAsync()
    {
        questions = await Task.Run(() => questionService.GetAll());
        selectedQuestion = questions[0];
    }
}
